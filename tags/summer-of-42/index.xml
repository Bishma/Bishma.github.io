<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Summer of 42 on Derek Rose: A how to guide for overthiking things.</title><link>https://dereksrose.com/tags/summer-of-42/</link><description>Recent content in Summer of 42 on Derek Rose: A how to guide for overthiking things.</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 27 Jun 2021 15:09:54 -0700</lastBuildDate><atom:link href="https://dereksrose.com/tags/summer-of-42/index.xml" rel="self" type="application/rss+xml"/><item><title>MrHomn</title><link>https://dereksrose.com/posts/mrhomn/</link><pubDate>Sun, 27 Jun 2021 15:09:54 -0700</pubDate><guid>https://dereksrose.com/posts/mrhomn/</guid><description>&lt;h1 id="my-new-home-automation-plan">My new home automation plan&lt;/h1>
&lt;figure
style="width: 70%;"
>
&lt;a
data-lightbox="image-/images/mrhomn/mrhomn1.jpg"
href="https://dereksrose.com/images/mrhomn/mrhomn1.jpg"
title=" "
>
&lt;img
src="https://dereksrose.com/images/mrhomn/mrhomn1.jpg"
/>
&lt;/a>
&lt;/figure>
&lt;p>When I decided to leave my job of over 15 years I knew that I wanted a bit of a career rewind. The last several years have seen me in full-time management positions and my programming, sysadmin, and SRE skills have gotten rusty. Since I learn by doing I wanted a project that would get me up-to-date and which I&amp;rsquo;d have fun implementing.&lt;/p>
&lt;p>&lt;a href="https://github.com/Bishma/MrHomn">MrHomn&lt;/a> is the 3rd generation of my home automation setup&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>. Which I plan to expand out to utilize common open source tools all operating in a docker-compose stack.&lt;/p>
&lt;h2 id="stack-elements">Stack Elements&lt;/h2>
&lt;figure
style="width: 70%;"
>
&lt;a
data-lightbox="image-/images/mrhomn/diagram.png"
href="https://dereksrose.com/images/mrhomn/diagram.png"
title=" The Planned Tech Stack&amp;amp;hellip; vaguely"
>
&lt;img
src="https://dereksrose.com/images/mrhomn/diagram.png"
/>
&lt;/a>
&lt;figcaption>
The Planned Tech Stack&amp;hellip; vaguely
&lt;/figcaption>
&lt;/figure>
&lt;h3 id="synology">Synology&lt;/h3>
&lt;p>I&amp;rsquo;ll be using my &lt;a href="https://www.synology.com/en-us">Diskstation&lt;/a> as my storage pool, docker host, and backup agent.&lt;/p>
&lt;h3 id="hass">hass&lt;/h3>
&lt;p>&lt;a href="https://www.home-assistant.io/">Home Assistant&lt;/a> is the brain of the setup. It provides the UI&amp;rsquo;s, device integrations, data recording, state tracking, events, and more.&lt;/p>
&lt;h3 id="sql_db">sql_db&lt;/h3>
&lt;p>I&amp;rsquo;ve gone with &lt;a href="https://mariadb.org/">MariaDB&lt;/a> for now. Home Assistant makes use of &lt;a href="https://www.sqlalchemy.org/">SQLAcadamy&lt;/a> which opens up a lot of DB options. At some point I may have more specific needs but for now the versatility of MariaDB seems like a good choice.&lt;/p>
&lt;h3 id="appdaemon">appdaemon&lt;/h3>
&lt;p>&lt;a href="https://appdaemon.readthedocs.io/en/latest/">AppDaemon&lt;/a> is a great way to incorporate loosely coupled Python apps with home assistant. Most critically this is how I&amp;rsquo;ll be creating my APIs to Home Assistant. My existing alexa skill connects to an &lt;a href="https://appdaemon.readthedocs.io/en/latest/AD_API_REFERENCE.html#alexa">appdaemon api&lt;/a> which makes use of &lt;code>sql_db&lt;/code>.&lt;/p>
&lt;h3 id="nginx">nginx&lt;/h3>
&lt;p>Initially, at least, I&amp;rsquo;m going to need a public API to support my Alexa skill. &lt;a href="https://www.nginx.com/">Nginx&lt;/a> is how I&amp;rsquo;ll be handling internal and external routing within my stack.&lt;/p>
&lt;h2 id="near-future-goals">Near Future Goals&lt;/h2>
&lt;h4 id="monitoring">Monitoring&lt;/h4>
&lt;p>I&amp;rsquo;m currently weighing &lt;a href="https://prometheus.io/">Prometheus&lt;/a> vs &lt;a href="https://www.zabbix.com/">Zabbix&lt;/a>. I&amp;rsquo;d learn more implementing Prometheus but it&amp;rsquo;s overkill for this project.&lt;/p>
&lt;h4 id="log-management">Log Management&lt;/h4>
&lt;p>TBD, but I&amp;rsquo;m leaning toward &lt;a href="https://hub.docker.com/r/graylog/graylog">Greylog&lt;/a>.&lt;/p>
&lt;h4 id="rum-and-synthetics">RUM and Synthetics&lt;/h4>
&lt;p>This is running on my local network. I&amp;rsquo;m not going to have enough traffic for these to be of any use but it is one of the things I&amp;rsquo;d like to grain some practical experience with. ¯\_(ツ)_/¯&lt;/p>
&lt;h3 id="data-analysis">Data Analysis&lt;/h3>
&lt;h4 id="timeseries_db">timeseries_db&lt;/h4>
&lt;p>SQL is well and good, but if you want to evaluate trends you want to be able to query for timeseries data. I am planning to use &lt;a href="https://www.influxdata.com/">InfluxDB&lt;/a>.&lt;/p>
&lt;p>I&amp;rsquo;d' likely make use of InfluxDB as the storage backend for Prometheus.&lt;/p>
&lt;h4 id="grafana">Grafana&lt;/h4>
&lt;p>&lt;a href="https://grafana.com/">Grafana&lt;/a> is a solid visualization platform that is common use. Understanding it at more than basic level will pay dividends.&lt;/p>
&lt;h3 id="purpose-built-sensors">Purpose built sensors&lt;/h3>
&lt;p>It has been decades since I did anything with hobbyist electronics and I intend to make the time to relearn it. I intend to use ESP modules and simple sensors anywhere I can figure out how to power them. I&amp;rsquo;d like to sample the temp and humidity in each space of my house. I&amp;rsquo;d like to add CO&lt;sub>2&lt;/sub>, Lux, dB, and in key areas. And I also want some manner particulate sensor(s) in my attic due to local wildfires. For added fun I can 3D Print each sensors' housing.&lt;/p>
&lt;figure
style="width: 60%;"
>
&lt;a
data-lightbox="image-/images/mrhomn/arduino-example.png"
href="https://dereksrose.com/images/mrhomn/arduino-example.png"
title=" Photo from"
>
&lt;img
src="https://dereksrose.com/images/mrhomn/arduino-example.png"
/>
&lt;/a>
&lt;figcaption>
&lt;a href="https://www.circuitbasics.com/how-to-set-up-the-dht11-humidity-sensor-on-an-arduino/">Photo from&lt;/a>
&lt;/figcaption>
&lt;/figure>
&lt;p>Additionally I&amp;rsquo;m planning to build an RPi based outdoor weather station.&lt;/p>
&lt;h4 id="esphome">ESPHome&lt;/h4>
&lt;p>Those purpose built sensors have to tell someone what they sense. That someone is &lt;a href="https://github.com/esphome/esphome">ESPHome&lt;/a> which I plan to deploy in the &lt;a href="https://hub.docker.com/r/esphome/esphome">docker&lt;/a> stack.&lt;/p>
&lt;h3 id="telegram-chatbot">Telegram Chatbot&lt;/h3>
&lt;p>My goal is to be able to duplicate a natural language interface for both voice assistants and telegram. Telegram has the extra benefit of being able to present options as buttons.&lt;/p>
&lt;h3 id="no-hardware-requiring-the-cloud">No hardware requiring the cloud&lt;/h3>
&lt;p>I&amp;rsquo;ve got a number of devices in my current home automation that require a cloud provider. I want to limit, if not eliminate this weakness. First it means that if the internet is out then my house is degraded. It means that I&amp;rsquo;m reliant on these companies to keep their services online and open enough for home assistant integrations to work with them. Also, I want my data and I want to stop giving so much of it away. Frankly I don&amp;rsquo;t think any of these companies properly compensate us for the wealth of data we expose.&lt;/p>
&lt;h4 id="voice-assistant">Voice Assistant&lt;/h4>
&lt;p>The little bit of research that I&amp;rsquo;ve done so far suggests that the weak point in the realm of open/local voice assistants is wake work detection. Every time an OSS project starts to get close it gets snapped up by companies looking to compete with Amazon and Google.&lt;/p>
&lt;p>All of that is to say that I want to replace Alexa. I&amp;rsquo;ll be doing various experiments to see how viable it is.&lt;/p>
&lt;h4 id="doorbell">Doorbell&lt;/h4>
&lt;p>I&amp;rsquo;m hearing that the &lt;a href="https://amcrest.com/smarthome-2-megapixel-wireless-doorbell-security-camera-1920-x-1080p-wifi-doorbell-camera-ip55-weatherproof-two-way-audio-ad110.html">Amcrest wifi doorbell&lt;/a> is decent hardware with a terrible app to back it up. But it has the big plus of not being cloud based. I can mimic alerting with Home Assistant + Telegram Bot, unfortunately that won&amp;rsquo;t replicate intercom functionality. There&amp;rsquo;s enough chance that we won&amp;rsquo;t be happy with the end result that I&amp;rsquo;m not willing to spend the money on one yet.&lt;/p>
&lt;p>We have a couple Amcrest PTZ cameras connected to home assistant via &lt;a href="https://www.synology.com/en-us/surveillance">Synology Surveillance Station&lt;/a>.&lt;/p>
&lt;h3 id="pytorch">PyTorch&lt;/h3>
&lt;h4 id="nvidia-jetson">Nvidia Jetson&lt;/h4>
&lt;p>This is a very affordable device that should be capable of keeping up with the tiny amount of learning and inference I&amp;rsquo;ll &amp;ldquo;need&amp;rdquo; for my house.&lt;/p>
&lt;h4 id="face-detection">Face detection&lt;/h4>
&lt;p>If we have non-cloud door cams I can have MrHome only send notifications if it identifies a human in the camera&amp;rsquo;s view when a motion detection triggers, avoiding some false positives. And if I can get it to recognize &lt;del>my many enemies&lt;/del> friends then I can &lt;del>launch countermeasures&lt;/del> play harp music&amp;hellip; or something.&lt;/p>
&lt;h4 id="routine-detection">Routine Detection&lt;/h4>
&lt;p>This is a half-baked idea at this point; I&amp;rsquo;d like to have MrHomn be able to do something like:&lt;/p>
&lt;ul>
&lt;li>Detect a recurring change to my day-to-day routine&lt;/li>
&lt;li>Generate an automation change proposal based on the new behavior&lt;/li>
&lt;li>Send a Telegram message to suggest the change&lt;/li>
&lt;li>Implement the change if approved&lt;/li>
&lt;/ul>
&lt;p>E.g. &amp;ldquo;I&amp;rsquo;ve noticed you&amp;rsquo;re going to bed later recently. Would you like me to delay your pre-bedtime automation by 30 minutes?&amp;rdquo;&lt;/p>
&lt;hr>
&lt;figure
style="width: 60%;"
>
&lt;a
data-lightbox="image-/images/mrhomn/mrhomn2.jpg"
href="https://dereksrose.com/images/mrhomn/mrhomn2.jpg"
title=" "
>
&lt;img
src="https://dereksrose.com/images/mrhomn/mrhomn2.jpg"
/>
&lt;/a>
&lt;/figure>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>OK, yes, I promised, after naming my second home automation repo &amp;ldquo;&lt;a href="https://github.com/Bishma/home-assistant-tng">HomeAssistant TNG&lt;/a>,&amp;rdquo; that I&amp;rsquo;d name my next one &amp;ldquo;Deep Space Nine.&amp;rdquo; But &lt;a href="https://memory-alpha.fandom.com/wiki/Homn">MrHomn&lt;/a> was too good to pass up.&lt;/p>
&lt;p>He was &lt;a href="https://memory-alpha.fandom.com/wiki/Lwaxana_Troi">Lwaxana Troy&amp;rsquo;s&lt;/a> very diligent valet in Star Trek TNG, three syllable wake words tend to work best for VUIs, &lt;a href="https://en.wikipedia.org/wiki/Carel_Struycken">Carel Struycken&lt;/a> is awesome, and Homn is a homonym of home (at least the way Lwaxana pronounced it).&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item></channel></rss>