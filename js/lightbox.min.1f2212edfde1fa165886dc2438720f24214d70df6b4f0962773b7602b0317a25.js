/*!
 * Lightbox v2.11.3
 * by Lokesh Dhakar
 *
 * More info:
 * http://lokeshdhakar.com/projects/lightbox2/
 *
 * Copyright Lokesh Dhakar
 * Released under the MIT license
 * https://github.com/lokesh/lightbox2/blob/master/LICENSE
 *
 * @preserve
 */(function(b,a){typeof define=='function'&&define.amd?define(['jquery'],a):typeof exports=='object'?module.exports=a(require('jquery')):b.lightbox=a(b.jQuery)})(this,function(a){function b(b){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=a.extend({},this.constructor.defaults),this.option(b)}return b.defaults={albumLabel:'Image %1 of %2',alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},b.prototype.option=function(b){a.extend(this.options,b)},b.prototype.imageCountLabel=function(a,b){return this.options.albumLabel.replace(/%1/g,a).replace(/%2/g,b)},b.prototype.init=function(){var b=this;a(document).ready(function(){b.enable(),b.build()})},b.prototype.enable=function(){var b=this;a('body').on('click','a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]',function(c){return b.start(a(c.currentTarget)),!1})},b.prototype.build=function(){if(a('#lightbox').length>0)return;var b=this;a('<div id="lightboxOverlay" tabindex="-1" class="lightboxOverlay"></div><div id="lightbox" tabindex="-1" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" alt=""/><div class="lb-nav"><a class="lb-prev" aria-label="Previous image" href="" ></a><a class="lb-next" aria-label="Next image" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(a('body')),this.$lightbox=a('#lightbox'),this.$overlay=a('#lightboxOverlay'),this.$outerContainer=this.$lightbox.find('.lb-outerContainer'),this.$container=this.$lightbox.find('.lb-container'),this.$image=this.$lightbox.find('.lb-image'),this.$nav=this.$lightbox.find('.lb-nav'),this.containerPadding={top:parseInt(this.$container.css('padding-top'),10),right:parseInt(this.$container.css('padding-right'),10),bottom:parseInt(this.$container.css('padding-bottom'),10),left:parseInt(this.$container.css('padding-left'),10)},this.imageBorderWidth={top:parseInt(this.$image.css('border-top-width'),10),right:parseInt(this.$image.css('border-right-width'),10),bottom:parseInt(this.$image.css('border-bottom-width'),10),left:parseInt(this.$image.css('border-left-width'),10)},this.$overlay.hide().on('click',function(){return b.end(),!1}),this.$lightbox.hide().on('click',function(c){a(c.target).attr('id')==='lightbox'&&b.end()}),this.$outerContainer.on('click',function(c){return a(c.target).attr('id')==='lightbox'&&b.end(),!1}),this.$lightbox.find('.lb-prev').on('click',function(){return b.currentImageIndex===0?b.changeImage(b.album.length-1):b.changeImage(b.currentImageIndex-1),!1}),this.$lightbox.find('.lb-next').on('click',function(){return b.currentImageIndex===b.album.length-1?b.changeImage(0):b.changeImage(b.currentImageIndex+1),!1}),this.$nav.on('mousedown',function(a){a.which===3&&(b.$nav.css('pointer-events','none'),b.$lightbox.one('contextmenu',function(){setTimeout(function(){this.$nav.css('pointer-events','auto')}.bind(b),0)}))}),this.$lightbox.find('.lb-loader, .lb-close').on('click',function(){return b.end(),!1})},b.prototype.start=function(b){var j=this,h=a(window),f,i,c,d,e,k,l;h.on('resize',a.proxy(this.sizeOverlay,this)),this.sizeOverlay(),this.album=[],f=0;function g(a){j.album.push({alt:a.attr('data-alt'),link:a.attr('href'),title:a.attr('data-title')||a.attr('title')})}if(i=b.attr('data-lightbox'),i){{c=a(b.prop('tagName')+'[data-lightbox="'+i+'"]');for(d=0;d<c.length;d=++d)g(a(c[d])),c[d]===b[0]&&(f=d)}}else if(b.attr('rel')==='lightbox')g(b);else{c=a(b.prop('tagName')+'[rel="'+b.attr('rel')+'"]');for(e=0;e<c.length;e=++e)g(a(c[e])),c[e]===b[0]&&(f=e)}k=h.scrollTop()+this.options.positionFromTop,l=h.scrollLeft(),this.$lightbox.css({top:k+'px',left:l+'px'}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&a('body').addClass('lb-disable-scrolling'),this.changeImage(f)},b.prototype.changeImage=function(e){var b=this,f=this.album[e].link,g=f.split('.').slice(-1)[0],d=this.$lightbox.find('.lb-image'),c;this.disableKeyboardNav(),this.$overlay.fadeIn(this.options.fadeDuration),a('.lb-loader').fadeIn('slow'),this.$lightbox.find('.lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption').hide(),this.$outerContainer.addClass('animating'),c=new Image,c.onload=function(){var n,j,k,h,i,m,l;d.attr({alt:b.album[e].alt,src:f}),n=a(c),d.width(c.width),d.height(c.height),l=a(window).width(),m=a(window).height(),i=l-b.containerPadding.left-b.containerPadding.right-b.imageBorderWidth.left-b.imageBorderWidth.right-20,h=m-b.containerPadding.top-b.containerPadding.bottom-b.imageBorderWidth.top-b.imageBorderWidth.bottom-b.options.positionFromTop-70,g==='svg'&&(d.width(i),d.height(h)),b.options.fitImagesInViewport?(b.options.maxWidth&&b.options.maxWidth<i&&(i=b.options.maxWidth),b.options.maxHeight&&b.options.maxHeight<h&&(h=b.options.maxHeight)):(i=b.options.maxWidth||c.width||i,h=b.options.maxHeight||c.height||h),(c.width>i||c.height>h)&&(c.width/i>c.height/h?(k=i,j=parseInt(c.height/(c.width/k),10),d.width(k),d.height(j)):(j=h,k=parseInt(c.width/(c.height/j),10),d.width(k),d.height(j))),b.sizeContainer(d.width(),d.height())},c.src=this.album[e].link,this.currentImageIndex=e},b.prototype.sizeOverlay=function(){var b=this;setTimeout(function(){b.$overlay.width(a(document).width()).height(a(document).height())},0)},b.prototype.sizeContainer=function(g,h){var a=this,e=this.$outerContainer.outerWidth(),f=this.$outerContainer.outerHeight(),c=g+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,b=h+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;function d(){a.$lightbox.find('.lb-dataContainer').width(c),a.$lightbox.find('.lb-prevLink').height(b),a.$lightbox.find('.lb-nextLink').height(b),a.$overlay.focus(),a.showImage()}e!==c||f!==b?this.$outerContainer.animate({width:c,height:b},this.options.resizeDuration,'swing',function(){d()}):d()},b.prototype.showImage=function(){this.$lightbox.find('.lb-loader').stop(!0).hide(),this.$lightbox.find('.lb-image').fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},b.prototype.updateNav=function(){var a=!1;try{document.createEvent('TouchEvent'),a=!!this.options.alwaysShowNavOnTouchDevices}catch(a){}this.$lightbox.find('.lb-nav').show(),this.album.length>1&&(this.options.wrapAround?(a&&this.$lightbox.find('.lb-prev, .lb-next').css('opacity','1'),this.$lightbox.find('.lb-prev, .lb-next').show()):(this.currentImageIndex>0&&(this.$lightbox.find('.lb-prev').show(),a&&this.$lightbox.find('.lb-prev').css('opacity','1')),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find('.lb-next').show(),a&&this.$lightbox.find('.lb-next').css('opacity','1'))))},b.prototype.updateDetails=function(){var b=this,a,c;typeof this.album[this.currentImageIndex].title!='undefined'&&this.album[this.currentImageIndex].title!==''&&(a=this.$lightbox.find('.lb-caption'),this.options.sanitizeTitle?a.text(this.album[this.currentImageIndex].title):a.html(this.album[this.currentImageIndex].title),a.fadeIn('fast')),this.album.length>1&&this.options.showImageNumberLabel?(c=this.imageCountLabel(this.currentImageIndex+1,this.album.length),this.$lightbox.find('.lb-number').text(c).fadeIn('fast')):this.$lightbox.find('.lb-number').hide(),this.$outerContainer.removeClass('animating'),this.$lightbox.find('.lb-dataContainer').fadeIn(this.options.resizeDuration,function(){return b.sizeOverlay()})},b.prototype.preloadNeighboringImages=function(){var a,b;this.album.length>this.currentImageIndex+1&&(a=new Image,a.src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&(b=new Image,b.src=this.album[this.currentImageIndex-1].link)},b.prototype.enableKeyboardNav=function(){this.$lightbox.on('keyup.keyboard',a.proxy(this.keyboardAction,this)),this.$overlay.on('keyup.keyboard',a.proxy(this.keyboardAction,this))},b.prototype.disableKeyboardNav=function(){this.$lightbox.off('.keyboard'),this.$overlay.off('.keyboard')},b.prototype.keyboardAction=function(b){var c=27,d=37,e=39,a=b.keyCode;a===c?(b.stopPropagation(),this.end()):a===d?this.currentImageIndex!==0?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):a===e&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},b.prototype.end=function(){this.disableKeyboardNav(),a(window).off('resize',this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),this.options.disableScrolling&&a('body').removeClass('lb-disable-scrolling')},new b})